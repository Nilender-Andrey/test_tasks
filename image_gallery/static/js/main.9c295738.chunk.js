(this.webpackJsonptest_1=this.webpackJsonptest_1||[]).push([[0],{21:function(e,a,r){},23:function(e,a,r){"use strict";r.r(a);var t=r(0),n=r(6),c=r.n(n),i=r(2),d=(r(21),r(5)),l=r(3),o=Object(l.b)({name:"images",initialState:{galleryImages:[],newImageUrl:"",drag:!1},reducers:{addImageUrl:function(e,a){var r={id:a.payload.id,url:e.newImageUrl,width:a.payload.width,height:a.payload.height};0!==r.url.length&&(e.galleryImages.push(r),e.newImageUrl="")},addListImage:function(e,a){e.galleryImages=[].concat(Object(d.a)(e.galleryImages),Object(d.a)(a.payload))},writeImageUrl:function(e,a){e.newImageUrl=a.payload},setDrag:function(e,a){e.drag=a.payload},deleteImage:function(e,a){var r=e.galleryImages.filter((function(e){return e.id!==a.payload}));e.galleryImages=r}}}),s=o.reducer,u=o.actions,g=u.writeImageUrl,m=u.addImageUrl,h=u.addListImage,j=u.setDrag,p=u.deleteImage,f=r(1);function b(e){var a=e.data,r=a.inputFileUpload,t=a.newImageUrl,n=a.errorText,c=a.inputTextOnChangeHandler,i=a.addImageFileHandler,d=a.addImageUrlHandler;return Object(f.jsxs)("header",{className:"header",children:[Object(f.jsxs)("div",{className:"header-wrap",children:[Object(f.jsx)("input",{className:"header__input",type:"text",onChange:c,value:t,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 Url \u0438\u043b\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0444\u0430\u0439\u043b \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438"}),Object(f.jsxs)("label",{htmlFor:t?"header__url-upload":"header__file-upload",className:"header__upload-label",children:[t?Object(f.jsx)("input",{className:"header__btn",id:"header__url-upload",type:"button",onClick:d}):Object(f.jsx)("input",{className:"header__btn",id:"header__file-upload",type:"file",ref:r,onChange:i}),"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443"]})]}),Object(f.jsx)("p",{className:"header__error",children:n})]})}var O=Object(l.b)({name:"errors",initialState:{errorKey:0,errorText:""},reducers:{changeTheErrorText:function(e,a){switch(a.payload){case"ERROR_0":e.errorText="";break;case"ERROR_1":e.errorText="\u0424\u0430\u0439\u043b \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0438\u043b\u0438 \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d!";break;case"ERROR_2":e.errorText="\u041d\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0438\u043b\u0438 \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d\u043d\u044b\u0439 URL \u0430\u0434\u0440\u0435\u0441!";break;default:e.errorText=""}}}}),v=O.reducer,x=O.actions.changeTheErrorText;var w=r(11);function _(e,a){var r=new FileReader;r.readAsText(e),r.onload=function(e){if(e.target){var r=e.target.result;if("string"===typeof r){var t=JSON.parse(r);a(h(function(e){return e.map((function(e,a){var r=Date.now()+a;return Object(w.a)(Object(w.a)({},e),{},{id:r})}))}(t.galleryImages)))}}}}function R(e,a){a(x("ERROR_0")),e.type.startsWith("image/")?function(e,a){var r=new Image;r.src=window.URL.createObjectURL(e),r.onload=function(){a(g(r.src)),a(m({id:Date.now(),width:r.width,height:r.height}))}}(e,a):"application/json"===e.type?_(e,a):a(x("ERROR_1"))}function I(){var e=Object(i.c)((function(e){return e.imagesReducer.newImageUrl})),a=Object(i.c)((function(e){return e.errorsReducer.errorText})),r=Object(t.useRef)(null),n=Object(i.b)();var c={inputFileUpload:r,newImageUrl:e,errorText:a,inputTextOnChangeHandler:function(e){n(g(e.target.value))},addImageFileHandler:function(){if(r.current&&r.current.files){var e=r.current.files[0];r.current.value="",e&&R(e,n)}},addImageUrlHandler:function(){n(x("ERROR_0"));var a=new Image;a.onload=function(){n(m({id:Date.now(),width:a.width,height:a.height}))},a.onerror=function(){n(x("ERROR_2")),n(g(""))},a.src=e}};return Object(f.jsx)(b,{data:c})}var y=r(12);function D(e){var a=e.image,r=e.cardDeleteHandler,n=Object(t.useState)(!1),c=Object(y.a)(n,2),i=c[0],d=c[1],l=new Image;return l.src=a.url,l.onload=function(){d(!0)},Object(f.jsxs)("div",{className:"card",style:{flexGrow:+"".concat(a.width/a.height)},children:[Object(f.jsx)("img",{className:"card__img",src:i?a.url:void 0,alt:"",width:a.width,height:a.height}),Object(f.jsx)("div",{className:"card__wrap-btn",children:Object(f.jsx)("button",{type:"button",className:"card__wrap-btn_delete",onClick:function(){return r(a.id)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})})]},a.id)}function U(e){var a=e.mainDate,r=a.imagesData,t=a.drag,n=a.dragStartHandler,c=a.dragLeaveHandler,i=a.onDropHandler,d=a.cardDeleteHandler;return Object(f.jsxs)("main",{className:t?"main drop-area":"main",onDragStart:n,onDragLeave:c,onDragOver:n,onDrop:i,children:[r.map((function(e){return Object(f.jsx)(D,{image:e,cardDeleteHandler:d},e.id)})),Object(f.jsx)("div",{className:"card"})]})}function H(){var e=Object(i.c)((function(e){return e.imagesReducer.galleryImages})),a=Object(i.c)((function(e){return e.imagesReducer.drag})),r=Object(i.b)();var t={imagesData:e,drag:a,dragStartHandler:function(e){e.preventDefault(),e.stopPropagation(),r(j(!0))},dragLeaveHandler:function(e){e.preventDefault(),e.stopPropagation(),"card"!==e.target.className&&r(j(!1))},onDropHandler:function(e){e.preventDefault(),e.stopPropagation(),Object(d.a)(e.dataTransfer.files).forEach((function(e){return R(e,r)})),r(j(!1))},cardDeleteHandler:function(e){r(p(e))}};return Object(f.jsx)(U,{mainDate:t})}function N(){return Object(f.jsxs)("div",{className:"app",children:[Object(f.jsx)(I,{}),Object(f.jsx)(H,{})]})}var T=Object(l.a)({reducer:{imagesReducer:s,errorsReducer:v}});c.a.render(Object(f.jsx)(i.a,{store:T,children:Object(f.jsx)(N,{})}),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.9c295738.chunk.js.map
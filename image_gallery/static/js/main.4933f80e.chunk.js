(this.webpackJsonptest_1=this.webpackJsonptest_1||[]).push([[0],{22:function(e,t,a){},24:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a(6),o=a.n(n),d=a(2),c=(a(22),a(3)),i=a(25),s=a(4),l=Object(s.b)({name:"images",initialState:{galleryImages:[{id:"1",url:"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/493550746.jpg",width:640,height:426},{id:"2",url:"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964007.jpg",width:1920,height:1200},{id:"3",url:"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/493550739.jpg",width:640,height:426},{id:"4",url:"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964009.jpg",width:436,height:650},{id:"5",url:"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/493550740.jpg",width:600,height:400},{id:"6",url:"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964008.jpg",width:509,height:339},{id:"7",url:"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964011.jpg",width:900,height:450},{id:"8",url:"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/493550755.jpg",width:480,height:640},{id:"9",url:"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964013.jpg",width:472,height:640},{id:"10",url:"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/493550745.jpg",width:640,height:425},{id:"11",url:"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964014.jpg",width:240,height:320},{id:"12",url:"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964016.jpg",width:540,height:337},{id:"13",url:"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964020.jpg",width:1600,height:1e3},{id:"14",url:"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964010.jpg",width:1506,height:575},{id:"15",url:"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/493550754.jpg",width:1280,height:1276},{id:"16",url:"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964021.jpg",width:1280,height:800},{id:"17",url:"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964012.jpg",width:787,height:787}],newImageUrl:"",drag:!1,focusImage:""},reducers:{addImageUrl:function(e,t){var a={id:t.payload.id,url:e.newImageUrl,width:t.payload.width,height:t.payload.height};0!==a.url.length&&(e.galleryImages.push(a),e.newImageUrl="")},addListImage:function(e,t){e.galleryImages=[].concat(Object(c.a)(e.galleryImages),Object(c.a)(t.payload))},writeImageUrl:function(e,t){e.newImageUrl=t.payload},setDrag:function(e,t){e.drag=t.payload},deleteImage:function(e,t){var a=e.galleryImages.filter((function(e){return e.id!==t.payload}));e.galleryImages=a},changeFocusImage:function(e,t){e.focusImage=t.payload===e.focusImage?"":t.payload}}}),u=l.reducer,g=l.actions,h=g.writeImageUrl,f=g.addImageUrl,m=g.addListImage,b=g.setDrag,p=g.deleteImage,j=g.changeFocusImage,O=a(1);function w(e){var t=e.data,a=t.inputFileUpload,r=t.newImageUrl,n=t.errorText,o=t.inputTextOnChangeHandler,d=t.addImageFileHandler,c=t.addImageUrlHandler;return Object(O.jsxs)("header",{className:"header",children:[Object(O.jsxs)("div",{className:"header-wrap",children:[Object(O.jsx)("input",{className:"header__input",type:"text",onChange:o,value:r,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 Url \u0438\u043b\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0444\u0430\u0439\u043b \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438"}),Object(O.jsxs)("label",{htmlFor:r?"header__url-upload":"header__file-upload",className:"header__upload-label",children:[r?Object(O.jsx)("input",{className:"header__btn",id:"header__url-upload",type:"button",onClick:c}):Object(O.jsx)("input",{className:"header__btn",id:"header__file-upload",type:"file",ref:a,onChange:d,multiple:!0}),"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443"]})]}),Object(O.jsx)("p",{className:"header__error",children:n})]})}var y=Object(s.b)({name:"errors",initialState:{errorKey:0,errorText:""},reducers:{changeTheErrorText:function(e,t){switch(t.payload.error){case"ERROR_0":e.errorText="";break;case"ERROR_1":e.errorText="\u0424\u0430\u0439\u043b ".concat(t.payload.text," \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0438\u043b\u0438 \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d!");break;case"ERROR_2":e.errorText="\u041d\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0438\u043b\u0438 \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d\u043d\u044b\u0439 URL \u0430\u0434\u0440\u0435\u0441!";break;default:e.errorText=""}}}}),I=y.reducer,x=y.actions.changeTheErrorText;var v=a(11);function _(e,t){var a=new FileReader;a.readAsText(e),a.onload=function(e){if(e.target){var a=e.target.result;if("string"===typeof a){var r=JSON.parse(a);t(m(function(e){return e.map((function(e,t){var a=Date.now()+t;return Object(v.a)(Object(v.a)({},e),{},{id:a})}))}(r.galleryImages)))}}}}function R(e,t){t(x({error:"ERROR_0"})),e.type.startsWith("image/")?function(e,t){var a=new Image;a.src=window.URL.createObjectURL(e),a.onload=function(){t(h(a.src)),t(f({id:Object(i.a)(),width:a.width,height:a.height}))}}(e,t):"application/json"===e.type?_(e,t):t(x({error:"ERROR_1",text:e.name}))}function k(){var e=Object(d.c)((function(e){return e.imagesReducer.newImageUrl})),t=Object(d.c)((function(e){return e.errorsReducer.errorText})),a=Object(r.useRef)(null),n=Object(d.b)();var o={inputFileUpload:a,newImageUrl:e,errorText:t,inputTextOnChangeHandler:function(e){n(h(e.target.value))},addImageFileHandler:function(){if(a.current&&a.current.files){var e=Object(c.a)(a.current.files);a.current.value="",e.forEach((function(e){return R(e,n)}))}},addImageUrlHandler:function(){n(x({error:"ERROR_0"}));var t=new Image;t.onload=function(){n(f({id:Object(i.a)(),width:t.width,height:t.height}))},t.onerror=function(){n(x({error:"ERROR_2"})),n(h(""))},t.src=e}};return Object(O.jsx)(w,{data:o})}var H=a(12),D=a.p+"static/media/Spinner.619f5e3e.svg";function N(e){var t=e.image,a=e.cardDeleteHandler,n=e.focusOnImageHandler,o=Object(r.useState)(!1),d=Object(H.a)(o,2),c=d[0],i=d[1],s=new Image;return s.src=t.url,s.onload=function(){i(!0)},Object(O.jsxs)("div",{className:"card",style:{flexGrow:+"".concat(t.width/t.height)},children:[Object(O.jsx)("button",{className:"card-btn",type:"button",onClick:function(){return n(t.url)},children:Object(O.jsx)("img",{className:"card-btn__img",src:c?t.url:void 0,alt:"",width:t.width,height:t.height,style:c?{background:"none"}:{background:"url(".concat(D,") no-repeat center")}})}),Object(O.jsx)("div",{className:"card__wrap-btn",children:Object(O.jsx)("button",{type:"button",className:"card__wrap-btn_delete",onClick:function(){return a(t.id)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})})]},t.id)}var U=function(e){var t=e.focusImage,a=e.focusOnImageHandler;return Object(O.jsx)("div",{className:"image-focus",onClick:function(){return a(t)},onKeyDown:function(e){return"Enter"===e.code&&a(t)},role:"button",tabIndex:0,children:Object(O.jsx)("img",{className:"image-focus__img",src:t,alt:""})})};function q(e){var t=e.mainDate,a=window.innerWidth,r=t.galleryImages,n=t.drag,o=t.focusImage,d=t.dragStartHandler,c=t.dragLeaveHandler,i=t.onDropHandler,s=t.cardDeleteHandler,l=t.focusOnImageHandler;return Object(O.jsxs)("main",{className:n?"main drop-area":"main",onDragStart:d,onDragLeave:c,onDragOver:d,onDrop:i,children:[o&&a>480&&Object(O.jsx)(U,{focusImage:o,focusOnImageHandler:l}),r.map((function(e){return Object(O.jsx)(N,{image:e,cardDeleteHandler:s,focusOnImageHandler:l},e.id)})),Object(O.jsx)("div",{className:"card"})]})}function T(){var e=Object(d.c)((function(e){return e.imagesReducer})),t=e.drag,a=e.galleryImages,r=e.focusImage,n=Object(d.b)();var o={galleryImages:a,drag:t,focusImage:r,dragStartHandler:function(e){e.preventDefault(),e.stopPropagation(),n(b(!0))},dragLeaveHandler:function(e){e.preventDefault(),e.stopPropagation(),"card"!==e.target.className&&n(b(!1))},onDropHandler:function(e){e.preventDefault(),e.stopPropagation(),Object(c.a)(e.dataTransfer.files).forEach((function(e){return R(e,n)})),n(b(!1))},cardDeleteHandler:function(e){n(p(e))},focusOnImageHandler:function(e){n(j(e))}};return Object(O.jsx)(q,{mainDate:o})}function E(){return Object(O.jsxs)("div",{className:"app",children:[Object(O.jsx)(k,{}),Object(O.jsx)(T,{})]})}var C=Object(s.a)({reducer:{imagesReducer:u,errorsReducer:I}});o.a.render(Object(O.jsx)(d.a,{store:C,children:Object(O.jsx)(E,{})}),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.4933f80e.chunk.js.map
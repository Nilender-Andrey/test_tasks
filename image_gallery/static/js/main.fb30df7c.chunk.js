(this.webpackJsonptest_1=this.webpackJsonptest_1||[]).push([[0],{21:function(e,t,a){},23:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a(6),d=a.n(n),i=a(2),o=(a(21),a(5)),c=a(3),s=Object(c.b)({name:"images",initialState:{galleryImages:[{id:1,url:"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/493550746.jpg",width:640,height:426},{id:2,url:"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964007.jpg",width:1920,height:1200},{id:3,url:"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/493550739.jpg",width:640,height:426},{id:4,url:"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964009.jpg",width:436,height:650},{id:5,url:"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/493550740.jpg",width:600,height:400},{id:6,url:"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964008.jpg",width:509,height:339},{id:7,url:"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964011.jpg",width:900,height:450},{id:8,url:"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/493550755.jpg",width:480,height:640},{id:9,url:"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964013.jpg",width:472,height:640},{id:10,url:"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/493550745.jpg",width:640,height:425},{id:11,url:"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964014.jpg",width:240,height:320},{id:12,url:"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964016.jpg",width:540,height:337},{id:13,url:"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964020.jpg",width:1600,height:1e3},{id:14,url:"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964010.jpg",width:1506,height:575},{id:15,url:"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/493550754.jpg",width:1280,height:1276},{id:16,url:"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964021.jpg",width:1280,height:800},{id:17,url:"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964012.jpg",width:787,height:787}],newImageUrl:"",drag:!1},reducers:{addImageUrl:function(e,t){var a={id:t.payload.id,url:e.newImageUrl,width:t.payload.width,height:t.payload.height};0!==a.url.length&&(e.galleryImages.push(a),e.newImageUrl="")},addListImage:function(e,t){e.galleryImages=[].concat(Object(o.a)(e.galleryImages),Object(o.a)(t.payload))},writeImageUrl:function(e,t){e.newImageUrl=t.payload},setDrag:function(e,t){e.drag=t.payload},deleteImage:function(e,t){var a=e.galleryImages.filter((function(e){return e.id!==t.payload}));e.galleryImages=a}}}),l=s.reducer,u=s.actions,g=u.writeImageUrl,h=u.addImageUrl,p=u.addListImage,f=u.setDrag,b=u.deleteImage,m=a(1);function j(e){var t=e.data,a=t.inputFileUpload,r=t.newImageUrl,n=t.errorText,d=t.inputTextOnChangeHandler,i=t.addImageFileHandler,o=t.addImageUrlHandler;return Object(m.jsxs)("header",{className:"header",children:[Object(m.jsxs)("div",{className:"header-wrap",children:[Object(m.jsx)("input",{className:"header__input",type:"text",onChange:d,value:r,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 Url \u0438\u043b\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0444\u0430\u0439\u043b \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438"}),Object(m.jsxs)("label",{htmlFor:r?"header__url-upload":"header__file-upload",className:"header__upload-label",children:[r?Object(m.jsx)("input",{className:"header__btn",id:"header__url-upload",type:"button",onClick:o}):Object(m.jsx)("input",{className:"header__btn",id:"header__file-upload",type:"file",ref:a,onChange:i}),"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443"]})]}),Object(m.jsx)("p",{className:"header__error",children:n})]})}var w=Object(c.b)({name:"errors",initialState:{errorKey:0,errorText:""},reducers:{changeTheErrorText:function(e,t){switch(t.payload){case"ERROR_0":e.errorText="";break;case"ERROR_1":e.errorText="\u0424\u0430\u0439\u043b \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0438\u043b\u0438 \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d!";break;case"ERROR_2":e.errorText="\u041d\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0438\u043b\u0438 \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d\u043d\u044b\u0439 URL \u0430\u0434\u0440\u0435\u0441!";break;default:e.errorText=""}}}}),O=w.reducer,y=w.actions.changeTheErrorText;var v=a(11);function x(e,t){var a=new FileReader;a.readAsText(e),a.onload=function(e){if(e.target){var a=e.target.result;if("string"===typeof a){var r=JSON.parse(a);t(p(function(e){return e.map((function(e,t){var a=Date.now()+t;return Object(v.a)(Object(v.a)({},e),{},{id:a})}))}(r.galleryImages)))}}}}function _(e,t){t(y("ERROR_0")),e.type.startsWith("image/")?function(e,t){var a=new Image;a.src=window.URL.createObjectURL(e),a.onload=function(){t(g(a.src)),t(h({id:Date.now(),width:a.width,height:a.height}))}}(e,t):"application/json"===e.type?x(e,t):t(y("ERROR_1"))}function R(){var e=Object(i.c)((function(e){return e.imagesReducer.newImageUrl})),t=Object(i.c)((function(e){return e.errorsReducer.errorText})),a=Object(r.useRef)(null),n=Object(i.b)();var d={inputFileUpload:a,newImageUrl:e,errorText:t,inputTextOnChangeHandler:function(e){n(g(e.target.value))},addImageFileHandler:function(){if(a.current&&a.current.files){var e=a.current.files[0];a.current.value="",e&&_(e,n)}},addImageUrlHandler:function(){n(y("ERROR_0"));var t=new Image;t.onload=function(){n(h({id:Date.now(),width:t.width,height:t.height}))},t.onerror=function(){n(y("ERROR_2")),n(g(""))},t.src=e}};return Object(m.jsx)(j,{data:d})}var I=a(12),k=a.p+"static/media/Spinner.619f5e3e.svg";function D(e){var t=e.image,a=e.cardDeleteHandler,n=Object(r.useState)(!1),d=Object(I.a)(n,2),i=d[0],o=d[1],c=new Image;return c.src=t.url,c.onload=function(){o(!0)},Object(m.jsxs)("div",{className:"card",style:{flexGrow:+"".concat(t.width/t.height)},children:[Object(m.jsx)("img",{className:"card__img",src:i?t.url:void 0,alt:"",width:t.width,height:t.height,style:i?{background:"none"}:{background:"url(".concat(k,") no-repeat center")}}),Object(m.jsx)("div",{className:"card__wrap-btn",children:Object(m.jsx)("button",{type:"button",className:"card__wrap-btn_delete",onClick:function(){return a(t.id)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})})]},t.id)}function U(e){var t=e.mainDate,a=t.imagesData,r=t.drag,n=t.dragStartHandler,d=t.dragLeaveHandler,i=t.onDropHandler,o=t.cardDeleteHandler;return Object(m.jsxs)("main",{className:r?"main drop-area":"main",onDragStart:n,onDragLeave:d,onDragOver:n,onDrop:i,children:[a.map((function(e){return Object(m.jsx)(D,{image:e,cardDeleteHandler:o},e.id)})),Object(m.jsx)("div",{className:"card"})]})}function q(){var e=Object(i.c)((function(e){return e.imagesReducer.galleryImages})),t=Object(i.c)((function(e){return e.imagesReducer.drag})),a=Object(i.b)();var r={imagesData:e,drag:t,dragStartHandler:function(e){e.preventDefault(),e.stopPropagation(),a(f(!0))},dragLeaveHandler:function(e){e.preventDefault(),e.stopPropagation(),"card"!==e.target.className&&a(f(!1))},onDropHandler:function(e){e.preventDefault(),e.stopPropagation(),Object(o.a)(e.dataTransfer.files).forEach((function(e){return _(e,a)})),a(f(!1))},cardDeleteHandler:function(e){a(b(e))}};return Object(m.jsx)(U,{mainDate:r})}function H(){return Object(m.jsxs)("div",{className:"app",children:[Object(m.jsx)(R,{}),Object(m.jsx)(q,{})]})}var N=Object(c.a)({reducer:{imagesReducer:l,errorsReducer:O}});d.a.render(Object(m.jsx)(i.a,{store:N,children:Object(m.jsx)(H,{})}),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.fb30df7c.chunk.js.map
{"version":3,"sources":["state/ImageState.ts","components/Header/Header.tsx","state/ErrorsState.ts","utils/fileHandling/addJsonFile.ts","helpers/addId.ts","utils/fileHandling/fileHandling.ts","utils/fileHandling/addImageFile.ts","components/Header/HeaderСontainer.tsx","img/Spinner.svg","components/Card/Card.tsx","components/ImageFocus/ImageFocus.tsx","components/Main/Main.tsx","components/Main/MainСontainer.tsx","App.tsx","state/store.ts","index.tsx"],"names":["imagesState","createSlice","name","initialState","galleryImages","id","url","width","height","newImageUrl","drag","focusImage","reducers","addImageUrl","state","data","imageData","payload","length","push","addListImage","writeImageUrl","setDrag","deleteImage","newGalleryImages","filter","item","changeFocusImage","actions","Header","inputFileUpload","errorText","inputTextOnChangeHandler","addImageFileHandler","addImageUrlHandler","className","type","onChange","value","placeholder","htmlFor","onClick","ref","multiple","errorsState","errorKey","changeTheErrorText","error","text","addJsonFile","file","dispatch","reader","FileReader","readAsText","onload","e","target","result","JSON","parse","map","index","Date","now","addId","fileHandling","startsWith","img","Image","src","window","URL","createObjectURL","uuidv4","addImageFile","HeaderСontainer","useSelector","imagesReducer","errorsReducer","useRef","useDispatch","event","current","files","filesList","forEach","onerror","Card","image","cardDeleteHandler","focusOnImageHandler","useState","load","setLoad","style","flexGrow","undefined","alt","background","ImageFocus","onKeyDown","code","role","tabIndex","Main","mainDate","widthWin","innerWidth","dragStartHandler","dragLeaveHandler","onDropHandler","onDragStart","onDragLeave","onDragOver","onDrop","MainСontainer","preventDefault","stopPropagation","dataTransfer","App","store","configureStore","reducer","imagesStateReducer","errorsStateReducer","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.4933f80e.chunk.js","sourcesContent":["/* eslint-disable no-param-reassign */\nimport { createSlice } from '@reduxjs/toolkit';\n\nexport type ImageType = {\n  id: string;\n  url: string;\n  width: number;\n  height: number;\n};\n\ninterface ImagesState {\n  galleryImages: ImageType[];\n  newImageUrl: string;\n  drag: boolean;\n  focusImage: string;\n}\nconst initialState: ImagesState = {\n  galleryImages: [\n    {\n      id: '1',\n      url: 'https://don16obqbay2c.cloudfront.net/frontend-test-task/images/493550746.jpg',\n      width: 640,\n      height: 426,\n    },\n    {\n      id: '2',\n      url: 'https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964007.jpg',\n      width: 1920,\n      height: 1200,\n    },\n    {\n      id: '3',\n      url: 'https://don16obqbay2c.cloudfront.net/frontend-test-task/images/493550739.jpg',\n      width: 640,\n      height: 426,\n    },\n    {\n      id: '4',\n      url: 'https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964009.jpg',\n      width: 436,\n      height: 650,\n    },\n    {\n      id: '5',\n      url: 'https://don16obqbay2c.cloudfront.net/frontend-test-task/images/493550740.jpg',\n      width: 600,\n      height: 400,\n    },\n    {\n      id: '6',\n      url: 'https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964008.jpg',\n      width: 509,\n      height: 339,\n    },\n    {\n      id: '7',\n      url: 'https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964011.jpg',\n      width: 900,\n      height: 450,\n    },\n    {\n      id: '8',\n      url: 'https://don16obqbay2c.cloudfront.net/frontend-test-task/images/493550755.jpg',\n      width: 480,\n      height: 640,\n    },\n    {\n      id: '9',\n      url: 'https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964013.jpg',\n      width: 472,\n      height: 640,\n    },\n    {\n      id: '10',\n      url: 'https://don16obqbay2c.cloudfront.net/frontend-test-task/images/493550745.jpg',\n      width: 640,\n      height: 425,\n    },\n    {\n      id: '11',\n      url: 'https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964014.jpg',\n      width: 240,\n      height: 320,\n    },\n    {\n      id: '12',\n      url: 'https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964016.jpg',\n      width: 540,\n      height: 337,\n    },\n    {\n      id: '13',\n      url: 'https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964020.jpg',\n      width: 1600,\n      height: 1000,\n    },\n    {\n      id: '14',\n      url: 'https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964010.jpg',\n      width: 1506,\n      height: 575,\n    },\n    {\n      id: '15',\n      url: 'https://don16obqbay2c.cloudfront.net/frontend-test-task/images/493550754.jpg',\n      width: 1280,\n      height: 1276,\n    },\n    {\n      id: '16',\n      url: 'https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964021.jpg',\n      width: 1280,\n      height: 800,\n    },\n    {\n      id: '17',\n      url: 'https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964012.jpg',\n      width: 787,\n      height: 787,\n    },\n  ],\n  newImageUrl: '',\n  drag: false,\n  focusImage: '',\n};\n\nconst imagesState = createSlice({\n  name: 'images',\n  initialState,\n\n  reducers: {\n    addImageUrl(state, data) {\n      const imageData = {\n        id: data.payload.id,\n        url: state.newImageUrl,\n        width: data.payload.width,\n        height: data.payload.height,\n      };\n      if (imageData.url.length !== 0) {\n        state.galleryImages.push(imageData);\n        state.newImageUrl = '';\n      }\n    },\n\n    addListImage(state, data) {\n      state.galleryImages = [...state.galleryImages, ...data.payload];\n    },\n    writeImageUrl(state, data) {\n      state.newImageUrl = data.payload;\n    },\n    setDrag(state, data) {\n      state.drag = data.payload;\n    },\n    deleteImage(state, data) {\n      const newGalleryImages = state.galleryImages.filter(\n        (item) => item.id !== data.payload,\n      );\n      state.galleryImages = newGalleryImages;\n    },\n    changeFocusImage(state, data) {\n      state.focusImage = data.payload === state.focusImage ? '' : data.payload;\n    },\n  },\n});\n\nexport default imagesState.reducer;\n\nexport const {\n  writeImageUrl,\n  addImageUrl,\n  addListImage,\n  setDrag,\n  deleteImage,\n  changeFocusImage,\n} = imagesState.actions;\n","import React from 'react';\n\ntype HeaderPropsType = {\n  data: {\n    inputFileUpload: React.RefObject<HTMLInputElement>;\n    newImageUrl: string;\n    errorText: string;\n    inputTextOnChangeHandler: (\n      event: React.ChangeEvent<HTMLInputElement>,\n    ) => void;\n    addImageFileHandler: () => void;\n    addImageUrlHandler: () => void;\n  };\n};\n\nexport default function Header({ data }: HeaderPropsType) {\n  const {\n    inputFileUpload,\n    newImageUrl,\n    errorText,\n    inputTextOnChangeHandler,\n    addImageFileHandler,\n\n    addImageUrlHandler,\n  } = data;\n\n  return (\n    <header className=\"header\">\n      <div className=\"header-wrap\">\n        <input\n          className=\"header__input\"\n          type=\"text\"\n          onChange={inputTextOnChangeHandler}\n          value={newImageUrl}\n          placeholder=\"Введите Url или загрузите файл картинки\"\n        />\n        <label\n          htmlFor={newImageUrl ? 'header__url-upload' : 'header__file-upload'}\n          className=\"header__upload-label\"\n        >\n          {newImageUrl ? (\n            <input\n              className=\"header__btn\"\n              id=\"header__url-upload\"\n              type=\"button\"\n              onClick={addImageUrlHandler}\n            />\n          ) : (\n            <input\n              className=\"header__btn\"\n              id=\"header__file-upload\"\n              type=\"file\"\n              ref={inputFileUpload}\n              onChange={addImageFileHandler}\n              multiple\n            />\n          )}\n          Добавить картинку\n        </label>\n      </div>\n      <p className=\"header__error\">{errorText}</p>\n    </header>\n  );\n}\n","/* eslint-disable no-param-reassign */\nimport { createSlice } from '@reduxjs/toolkit';\n\ninterface ErrorsState {\n  errorKey: number;\n  errorText: string;\n}\n\ntype DataType = {\n  payload: { error: string; text?: string };\n  type: string;\n};\n\nconst initialState: ErrorsState = {\n  errorKey: 0,\n  errorText: '',\n};\n\nconst errorsState = createSlice({\n  name: 'errors',\n  initialState,\n\n  reducers: {\n    changeTheErrorText(state, data: DataType) {\n      switch (data.payload.error) {\n        case 'ERROR_0':\n          state.errorText = '';\n          break;\n        case 'ERROR_1':\n          state.errorText = `Файл ${data.payload.text} не поддерживается или поврежден!`;\n          break;\n        case 'ERROR_2':\n          state.errorText = 'Не правильный или поврежденный URL адрес!';\n          break;\n\n        default:\n          state.errorText = '';\n          break;\n      }\n    },\n  },\n});\n\nexport default errorsState.reducer;\n\nexport const { changeTheErrorText } = errorsState.actions;\n","import { Dispatch } from '@reduxjs/toolkit';\nimport { addId } from '../../helpers/addId';\nimport { addListImage } from '../../state/ImageState';\n\nexport default function addJsonFile(file: File, dispatch: Dispatch<any>) {\n  const reader = new FileReader();\n  reader.readAsText(file);\n  reader.onload = (e) => {\n    if (e.target) {\n      const text = e.target.result;\n\n      if (typeof text === 'string') {\n        const imageData = JSON.parse(text);\n\n        dispatch(addListImage(addId(imageData.galleryImages)));\n      }\n    }\n  };\n}\n","export type ImageType = {\n  id?: number;\n  url: string;\n  width?: number;\n  height?: number;\n};\n\nexport function addId(imageData: ImageType[]) {\n  return imageData.map((item, index) => {\n    const id = Date.now() + index;\n    return { ...item, id };\n  });\n}\n","import { Dispatch } from '@reduxjs/toolkit';\nimport { changeTheErrorText } from '../../state/ErrorsState';\nimport addImageFile from './addImageFile';\nimport addJsonFile from './addJsonFile';\n\nexport default function fileHandling(file: File, dispatch: Dispatch) {\n  dispatch(changeTheErrorText({ error: 'ERROR_0' }));\n\n  if (file.type.startsWith('image/')) {\n    addImageFile(file, dispatch);\n  } else if (file.type === 'application/json') {\n    addJsonFile(file, dispatch);\n  } else {\n    dispatch(changeTheErrorText({ error: 'ERROR_1', text: file.name }));\n  }\n}\n","import { Dispatch } from '@reduxjs/toolkit';\nimport { v4 as uuidv4 } from 'uuid';\nimport { addImageUrl, writeImageUrl } from '../../state/ImageState';\n\nexport default function addImageFile(file: File, dispatch: Dispatch) {\n  const img = new Image();\n\n  img.src = window.URL.createObjectURL(file);\n\n  img.onload = () => {\n    dispatch(writeImageUrl(img.src));\n    dispatch(\n      addImageUrl({ id: uuidv4(), width: img.width, height: img.height }),\n    );\n  };\n}\n","import React, { useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport {\n  addImageUrl,\n  addListImage,\n  writeImageUrl,\n} from '../../state/ImageState';\nimport { RootState } from '../../state/store';\nimport Header from './Header';\nimport fileHandling from '../../utils/fileHandling/fileHandling';\nimport { changeTheErrorText } from '../../state/ErrorsState';\n\nexport default function HeaderСontainer() {\n  const newImageUrl = useSelector(\n    (state: RootState) => state.imagesReducer.newImageUrl,\n  );\n\n  const errorText = useSelector(\n    (state: RootState) => state.errorsReducer.errorText,\n  );\n  const inputFileUpload = useRef<HTMLInputElement>(null);\n  const dispatch = useDispatch();\n\n  function inputTextOnChangeHandler(\n    event: React.ChangeEvent<HTMLInputElement>,\n  ) {\n    dispatch(writeImageUrl(event.target.value));\n  }\n\n  function addImageUrlHandler() {\n    dispatch(changeTheErrorText({ error: 'ERROR_0' }));\n\n    const img = new Image();\n\n    img.onload = () => {\n      dispatch(\n        addImageUrl({ id: uuidv4(), width: img.width, height: img.height }),\n      );\n    };\n\n    img.onerror = () => {\n      dispatch(changeTheErrorText({ error: 'ERROR_2' }));\n      dispatch(writeImageUrl(''));\n    };\n    img.src = newImageUrl;\n  }\n\n  function addImageFileHandler() {\n    if (inputFileUpload.current && inputFileUpload.current.files) {\n      const filesList = [...inputFileUpload.current.files];\n      inputFileUpload.current.value = '';\n\n      filesList.forEach((file) => fileHandling(file, dispatch));\n    }\n  }\n\n  const data = {\n    inputFileUpload,\n    newImageUrl,\n    errorText,\n    inputTextOnChangeHandler,\n    addImageFileHandler,\n    addImageUrlHandler,\n  };\n\n  return <Header data={data} />;\n}\n","export default __webpack_public_path__ + \"static/media/Spinner.619f5e3e.svg\";","import React, { useState } from 'react';\nimport placeholder from '../../img/Spinner.svg';\n\ntype CardPropsType = {\n  image: { id: string; url: string; width: number; height: number };\n  cardDeleteHandler: (id: string) => void;\n  focusOnImageHandler: (url: string) => void;\n};\n\nexport default function Card({\n  image,\n\n  cardDeleteHandler,\n  focusOnImageHandler,\n}: CardPropsType) {\n  const [load, setLoad] = useState(false);\n  const img = new Image();\n\n  img.src = image.url;\n  img.onload = () => {\n    setLoad(true);\n  };\n\n  return (\n    <div\n      className=\"card\"\n      key={image.id}\n      style={{ flexGrow: +`${image.width / image.height}` }}\n    >\n      <button\n        className=\"card-btn\"\n        type=\"button\"\n        onClick={() => focusOnImageHandler(image.url)}\n      >\n        <img\n          className=\"card-btn__img\"\n          src={load ? image.url : undefined}\n          alt=\"\"\n          width={image.width}\n          height={image.height}\n          style={\n          load\n            ? { background: 'none' }\n            : { background: `url(${placeholder}) no-repeat center` }\n        }\n        />\n      </button>\n\n      <div className=\"card__wrap-btn\">\n        <button\n          type=\"button\"\n          className=\"card__wrap-btn_delete\"\n          onClick={() => cardDeleteHandler(image.id)}\n        >\n          Удалить\n        </button>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\n\ntype ImageFocusType ={\n  focusImage: string\n  focusOnImageHandler: (url: string) => void;\n}\n\nfunction ImageFocus({ focusImage, focusOnImageHandler }:ImageFocusType) {\n  return (\n\n    <div\n      className=\"image-focus\"\n      onClick={() => focusOnImageHandler(focusImage)}\n      onKeyDown={(e) => e.code === 'Enter' && focusOnImageHandler(focusImage)}\n      role=\"button\"\n      tabIndex={0}\n    >\n      <img className=\"image-focus__img\" src={focusImage} alt=\"\" />\n    </div>\n\n  );\n}\n\nexport default ImageFocus;\n","import React from 'react';\nimport Card from '../Card/Card';\nimport ImageFocus from '../ImageFocus/ImageFocus';\n\ntype MainPropsType = {\n  mainDate: {\n    galleryImages: {\n      id: string;\n      url: string;\n      width: number;\n      height: number;\n    }[];\n    drag: boolean;\n    focusImage: string;\n    dragStartHandler: (e: React.DragEvent<HTMLDivElement>) => void;\n    dragLeaveHandler: (e: React.DragEvent<HTMLDivElement>) => void;\n    onDropHandler: (e: React.DragEvent<HTMLDivElement>) => void;\n    cardDeleteHandler: (id: string) => void;\n    focusOnImageHandler: (url: string) => void;\n  };\n};\n\nexport default function Main({ mainDate }: MainPropsType) {\n  const MAX_WIDTH = 480;\n  const widthWin = window.innerWidth;\n  const {\n    galleryImages,\n    drag,\n    focusImage,\n    dragStartHandler,\n    dragLeaveHandler,\n    onDropHandler,\n    cardDeleteHandler,\n    focusOnImageHandler,\n  } = mainDate;\n\n  return (\n    <main\n      className={drag ? 'main drop-area' : 'main'}\n      onDragStart={dragStartHandler}\n      onDragLeave={dragLeaveHandler}\n      onDragOver={dragStartHandler}\n      onDrop={onDropHandler}\n    >\n      { focusImage && widthWin > MAX_WIDTH && <ImageFocus focusImage={focusImage} focusOnImageHandler={focusOnImageHandler} />}\n      {galleryImages.map((image) => (\n        <Card\n          image={image}\n          cardDeleteHandler={cardDeleteHandler}\n          focusOnImageHandler={focusOnImageHandler}\n          key={image.id}\n        />\n      ))}\n      <div className=\"card\" />\n    </main>\n  );\n}\n","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { changeFocusImage, deleteImage, setDrag } from '../../state/ImageState';\nimport { RootState } from '../../state/store';\nimport fileHandling from '../../utils/fileHandling/fileHandling';\n\nimport Main from './Main';\n\nexport default function MainСontainer() {\n  const { drag, galleryImages, focusImage } = useSelector(\n    (state: RootState) => state.imagesReducer,\n  );\n  const dispatch = useDispatch();\n\n  function dragStartHandler(e: React.DragEvent<HTMLElement>) {\n    e.preventDefault();\n    e.stopPropagation();\n    dispatch(setDrag(true));\n  }\n\n  function dragLeaveHandler(e: React.DragEvent<HTMLElement>) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const target = e.target as HTMLElement;\n\n    if (target.className === 'card') return;\n    dispatch(setDrag(false));\n  }\n\n  function onDropHandler(e: React.DragEvent<HTMLDivElement>) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const files = [...e.dataTransfer.files];\n\n    files.forEach((file) => fileHandling(file, dispatch));\n    dispatch(setDrag(false));\n  }\n\n  function cardDeleteHandler(id: string) {\n    dispatch(deleteImage(id));\n  }\n\n  const focusOnImageHandler = (id: string) => {\n    dispatch(changeFocusImage(id));\n  };\n\n  const mainDate = {\n    galleryImages,\n    drag,\n    focusImage,\n    dragStartHandler,\n    dragLeaveHandler,\n    onDropHandler,\n    cardDeleteHandler,\n    focusOnImageHandler,\n  };\n\n  return <Main mainDate={mainDate} />;\n}\n","import React from 'react';\n\nimport './App.scss';\nimport HeaderСontainer from './components/Header/HeaderСontainer';\nimport MainСontainer from './components/Main/MainСontainer';\n\nexport default function App() {\n  return (\n    <div className=\"app\">\n      <HeaderСontainer />\n      <MainСontainer />\n    </div>\n  );\n}\n","import { configureStore } from '@reduxjs/toolkit';\n\nimport imagesStateReducer from './ImageState';\nimport errorsStateReducer from './ErrorsState';\n\nexport type RootState = ReturnType<typeof store.getState>;\n\nexport const store = configureStore({\n  reducer: {\n    imagesReducer: imagesStateReducer,\n    errorsReducer: errorsStateReducer,\n  },\n\n});\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\n\nimport App from './App';\nimport { store } from './state/store';\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}